<!-- index2.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Scores</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6">
            <div id="chart1" style="width: 90%; height: 300px;"></div>
        </div>
        <div class="col-md-6">
            <div id="chart2" style="width: 90%; height: 300px;"></div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-md-6">
            <div id="chart3" style="width: 90%; height: 300px;"></div>
        </div>
        <div class="col-md-6">
            <div id="chart4" style="width: 90%; height: 300px;"></div>
        </div>
    </div>
</div>

<!-- ECharts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.2.1/echarts.min.js"></script>
<!-- jQuery -->
<script src="../static/js/jquery-3.3.1.min.js"></script>
<script>
    function drawCharts() {
        data1 =
        {{ data1 | safe }}
        // Process data for each chart

        // Chart 1: Example bar chart
        var chart1 = echarts.init(document.getElementById('chart1'));
        var names = [];
        var scores = [];
        for (var i = 0; i < data1.length; i++) {
            names.push(data1[i].name);
            scores.push(data1[i].score);
        }
        var option1 = {
            title: {
                text: '各市区文化遗产分布图'
            },
            xAxis: {
                type: 'category',
                data: names
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                data: scores,
                type: 'bar'
            }]
        };
        chart1.setOption(option1);

        // Chart 2: Example line chart
        var names2 = [];
        var scores2 = [];
        data2 =
        {{ data2 | safe}}
        for (var i = 0; i < data2.length; i++) {
            names2.push(data2[i].name);
            scores2.push(data2[i].score);
        }
        var chart2 = echarts.init(document.getElementById('chart2'));
        var option2 = {
            title: {
                text: '各省文化遗产分布图'
            },
            xAxis: {
                type: 'category',
                data: names2
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                data: scores2,
                type: 'bar'
            }]
        };
        chart2.setOption(option2);

        // Chart 3: Example pie chart
        var names3 = [];
        var scores3 = [];
        data3 =
        {{ data3 | safe}}
        for (var i = 0; i < data3.length; i++) {
            names3.push(data3[i].name);
            scores3.push(data3[i].score);
        }
        var chart3 = echarts.init(document.getElementById('chart3'));
        var option3 = {
            title: {
                text: '不同文化对比'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            series: [{
                name: 'Score',
                type: 'pie',
                radius: ['50%', '70%'],
                avoidLabelOverlap: false,
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '30',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: data3.map(function (item) {
                    return {value: item.score, name: item.name};
                })
            }]
        };
        chart3.setOption(option3);

        // Chart 4: Another example chart (customize as needed)
        data4 =
        {{ data4 | safe}}
        var chart4 = echarts.init(document.getElementById('chart4'));
        var option4 = {
            title: {
                text: '遗产分布'
            },
            tooltip: {
                position: 'top'
            },
            grid: {
                height: '50%',
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: {{ x1|safe }},
                splitArea: {
                    show: true
                }
            },
            yAxis: {
                type: 'category',
                data: {{ y1|safe }},
                splitArea: {
                    show: true
                }
            },
            visualMap: {
                min: 0,
                max: 10,
                calculable: true,
                orient: 'horizontal',
                left: 'center',
                bottom: '15%'
            },
            series: [
                {
                    name: 'Punch Card',
                    type: 'heatmap',
                    data: {{ data4|safe }},
                    label: {
                        show: true
                    },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        chart4.setOption(option4);

    }

    drawCharts()
</script>
</body>
</html>
